@model ArticolModel 
@using Markdig;
@using SpaceClopedia.Logic

@{
    ArticolModel articol = Model;
    ViewData["Title"] = articol.Titlu;
    Rol? rol = ViewBag.Rol;
    // var markdownContent = Html.Raw(Html.Encode(articol.Continut).Replace("&#xD;&#xA;", "<br />"));
    var htmlContent = Markdown.ToHtml(articol.Continut);
}

<h2>@articol.Titlu</h2>

<article>
    <h3>Autor: @articol.Autor</h3>
    <p>Adaugat la data de: @articol.DataCreare</p>
    <p>Ultima modificare la data de: @articol.DataModificare</p>
    <p>Categorie: @articol.Domeniu!.NumeDomeniu</p>
    @* <p>@articol.Continut</p> *@
    @* p>@Html.Raw(Html.Encode(articol.Continut).Replace("&#xD;&#xA;", "<br />"))</p> *@
    <div>
        @Html.Raw(htmlContent)
        @if (Model.Image != null)
        {
            <div class="article-image">
                <img src="@Url.Action("GetImage", "Articol", new { id = Model.Id })" alt="Article Image" class="img-fluid" />
            </div>
        }
    </div>
    @if (User.Identity.IsAuthenticated && (rol != null && ((int)rol == 0 || (int)rol == 1)))
    {
        <h4><a asp-controller="Articol" asp-action="RevertArticol" asp-route-articolId="@articol.Id">Reveniti la versiunea anterioara</a></h4>
    }
</article>

<a asp-controller="Articol" asp-action="Index">Intoarce-te</a>
